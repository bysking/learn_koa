<html>
<head>
  <title>vuex工程模块化（完成）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600986 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="433"/>
<h1>vuex工程模块化（完成）</h1>

<div>
<span><div><div><ul><li><div><font style="font-size: 16pt;"><b>vuex工程模块化（完成）</b></font></div></li></ul><div><br/></div><ul><li><div>目录结构：store文件夹，modules模块 user bill,index主入口 type 配置化的方法</div></li></ul><div><img src="vuex工程模块化（完成）_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><br/></div><ul><li><div>index.js</div></li></ul><div><br/></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">Vue</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(206, 145, 120);">'vue'</span> <font style="color: rgb(121, 121, 121);">// 导入vue</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">Vuex</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(206, 145, 120);">'vuex'</span> <font style="color: rgb(121, 121, 121);">// 导入vuex</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">user</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(206, 145, 120);">'./modules/user'</span> <font style="color: rgb(121, 121, 121);">// 导入user模块</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">home</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(206, 145, 120);">'./modules/home'</span> <font style="color: rgb(121, 121, 121);">// 导入home模块</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(156, 220, 254);">Vue</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">use</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(156, 220, 254);">Vuex</span><span style="color: rgb(212, 212, 212);">)</span> <font style="color: rgb(121, 121, 121);">// 使用vuex组件</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">store</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(86, 156, 214);">new</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(78, 201, 176);">Vuex</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(78, 201, 176);">Store</span><span style="color: rgb(212, 212, 212);">({</span> <font style="color: rgb(121, 121, 121);">// 实例化组件，传入配置</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(212, 212, 212);">  </span><span style="color: rgb(156, 220, 254);">modules:</span><span style="color: rgb(212, 212, 212);"> {</span> <font style="color: rgb(121, 121, 121);">// 模块的声明与使用</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">,</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">home</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  }</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">})</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(197, 134, 192);">export</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(197, 134, 192);">default</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">store</span> <font style="color: rgb(121, 121, 121);">// 导出为公共模块供其他js文件引入使用</font></div><div><br/></div><ul><li><div>type.js</div></li></ul><div>方法名配参数化，方便统一修改维护</div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><font style="color: rgb(121, 121, 121);">// user的方法参数定义</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #c586c0;">export</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">SET_USER</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'SET_USER'</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #c586c0;">export</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">REMOVE_USER</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'REMOVE_USER'</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #ce9178;"><br/></span></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><font style="color: rgb(121, 121, 121);">// token的方法参数定义</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #c586c0;">export</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">SET_TOKEN</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'SET_TOKEN'</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;"><span style="color: #c586c0;">export</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">REMOVE_TOKEN</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> </span><span style="color: #ce9178;">'REMOVE_TOKEN'</span></span><span style="color: #ce9178;"><br/></span></div><ul><li><div>user模块的定义：</div></li></ul><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(86, 156, 214);">*</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(197, 134, 192);">as</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">types</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(206, 145, 120);">'../types'</span> <font style="color: rgb(121, 121, 121);">// 导入方法变量</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">state</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(212, 212, 212);"> {</span> <font style="color: rgb(121, 121, 121);">// 数据池，存放我们需要维护的全局变量</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(212, 212, 212);">  </span><span style="color: rgb(156, 220, 254);">token:</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(86, 156, 214);">null</span><span style="color: rgb(212, 212, 212);">,</span> <font style="color: rgb(121, 121, 121);">// 用户token，请求的时候会带上</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(212, 212, 212);">  </span><span style="color: rgb(156, 220, 254);">userInfo:</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(86, 156, 214);">null</span> <font style="color: rgb(121, 121, 121);">// 用户信息</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">}</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;"><br/></span></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><font style="color: rgb(121, 121, 121);">// <span style="font-size: 11pt; font-family: Consolas;"><a href="https://blog.csdn.net/tivon_594/article/details/80361603" style="color: rgb(121, 121, 121);">https://blog.csdn.net/tivon_594/article/details/80361603</a> action mutation 区别</span></font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">mutations</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(212, 212, 212);"> {</span> <font style="color: rgb(121, 121, 121);">// 同步操作更改state里面的值</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><font style="color: rgb(121, 121, 121);"><span>    // 设置token</span><br/></font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(212, 212, 212);">  [</span><span style="color: rgb(156, 220, 254);">types</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">SET_TOKEN</span><span style="color: rgb(212, 212, 212);">] (</span><span style="color: rgb(156, 220, 254);">state</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(156, 220, 254);">token</span><span style="color: rgb(212, 212, 212);">) {</span> <font style="color: rgb(121, 121, 121);">//</font> <font style="color: rgb(121, 121, 121);">types.js --&gt;</font> <font style="color: rgb(121, 121, 121);">export const SET_TOKEN = 'SET_TOKEN'</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">token</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">token</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  },</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;"><span>    // 移除token</span><br/></span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  [</span><span style="color: #9cdcfe;">types</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">REMOVE_TOKEN</span><span style="color: #d4d4d4;">] (</span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;">) {</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">token</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  },</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span>    // 设置user</span><br/></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  [</span><span style="color: #9cdcfe;">types</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">SET_USER</span><span style="color: #d4d4d4;">] (</span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">) {</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #c586c0;">if</span><span style="color: #d4d4d4;"> (</span><span style="color: #d4d4d4;">!</span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">) </span><span style="color: #c586c0;">return</span></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);"> {</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(212, 212, 212);">...</span><span style="color: rgb(156, 220, 254);">userInfo</span><span style="color: rgb(212, 212, 212);"> } </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">user</span> <font style="color: rgb(121, 121, 121);">// 从userz中解构出userInfo</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(156, 220, 254);">state</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">userInfo</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">userInfo</span> <font style="color: rgb(121, 121, 121);">// state赋值</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  },</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;"><span>    // 移除user</span><br/></span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  [</span><span style="color: #9cdcfe;">types</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">REMOVE_USER</span><span style="color: #d4d4d4;">] (</span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;">) {</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">userInfo</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">null</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  }</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">}</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;">// 异步，调用mutation触发state修改</div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">actions</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(212, 212, 212);"> {</span> <font style="color: rgb(121, 121, 121);">// 异步操作通过调用mutations操作state,中间可以添加自己的函数处理逻辑</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><font style="color: rgb(121, 121, 121);">// 方法与mutation一一对应</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><font style="color: rgb(121, 121, 121);">// 设置 token</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  </span><span style="color: #dcdcaa;">setToken</span><span style="color: #d4d4d4;"> ({ </span><span style="color: #9cdcfe;">commit</span><span style="color: #d4d4d4;"> }, </span><span style="color: #9cdcfe;">token</span><span style="color: #d4d4d4;">) {</span></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(212, 212, 212);">    </span><span style="color: rgb(220, 220, 170);">commit</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(156, 220, 254);">types</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">SET_TOKEN</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(156, 220, 254);">token</span><span style="color: rgb(212, 212, 212);">)</span> <font style="color: rgb(121, 121, 121);">// 触发mutation里面名字为 type.SET_TOKEN 对应的函数方法，参数为token</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  },</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">// 移除token</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  </span><span style="color: #dcdcaa;">removeToken</span><span style="color: #d4d4d4;"> ({ </span><span style="color: #9cdcfe;">commit</span><span style="color: #d4d4d4;"> }) {</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #dcdcaa;">commit</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">types</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">REMOVE_TOKEN</span><span style="color: #d4d4d4;">)</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  },</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;">// 设置用户</div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  </span><span style="color: #dcdcaa;">setUser</span><span style="color: #d4d4d4;"> ({ </span><span style="color: #9cdcfe;">commit</span><span style="color: #d4d4d4;"> }, </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">) {</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #dcdcaa;">commit</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">types</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">SET_USER</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">user</span><span style="color: #d4d4d4;">)</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  },</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">// 移除用户</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  </span><span style="color: #dcdcaa;">removeUser</span><span style="color: #d4d4d4;"> ({ </span><span style="color: #9cdcfe;">commit</span><span style="color: #d4d4d4;"> }) {</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #dcdcaa;">commit</span><span style="color: #d4d4d4;">(</span><span style="color: #9cdcfe;">types</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">REMOVE_USER</span><span style="color: #d4d4d4;">)</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  }</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">}</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">getters</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> { // state中的属性变量的计算属性，比如可以直接返回或者处理后返回</span></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(212, 212, 212);">  </span><span style="color: rgb(220, 220, 170);">userInfo</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">state</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(156, 220, 254);">state</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">userInfo</span> <font style="color: rgb(121, 121, 121);">// 一般原样返回</font></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><font style="color: rgb(121, 121, 121);">  // userInfo: state =&gt; state.userInfo + 'hello world' // 自己处理数据</font><span style="color: rgb(156, 220, 254);"><br/></span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">}</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div style="background-color: rgb(30, 30, 30); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><span style="color: rgb(197, 134, 192);">export</span><span style="color: rgb(212, 212, 212);"> </span><span style="color: rgb(197, 134, 192);">default</span><span style="color: rgb(212, 212, 212);"> {</span> <font style="color: rgb(121, 121, 121);">// 导出模块对象的属性</font></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  </span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;">,</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  </span><span style="color: #9cdcfe;">actions</span><span style="color: #d4d4d4;">,</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  </span><span style="color: #9cdcfe;">mutations</span><span style="color: #d4d4d4;">,</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">  </span><span style="color: #9cdcfe;">getters</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">}</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><br/></div><div><br/></div><div><br/></div><div><br/></div><div>如何拿state值：</div><div><span>    如果不需要别的计算逻辑，使用state里面的原始值就能满足需要，一般 this.$store.state.xxx, 这段代码一般放在计算属性里面使用</span><br/></div><div><br/></div><div>如果需要对数据进行一些处理</div><div>可以通过state里面的getters来预处理数据，下面直接使用</div><div>1.从vuex中解构<span style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">mapGetters</span>导入</div><div>    <span style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; color: rgb(197, 134, 192); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">import</span> <span style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span> <span style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; color: rgb(156, 220, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">mapGetters</span> <span style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; color: rgb(212, 212, 212); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">}</span> <span style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; color: rgb(197, 134, 192); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">from</span> <span style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre; color: rgb(206, 145, 120); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">'vuex'</span></div><div><span style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre;"><br/></span></div><ol start="2"><li><div>直接在计算属性映射，对应的全局变量，最后通过this.xxx引用</div></li></ol><div>computed: {</div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre;"><span style="font-size: 14px; line-height: 19px; color: rgb(214, 214, 214); font-family: Constantia;"><span>    </span>...mapGetters(['userInfo']) // 多个变量通过数组里面添加就行</span></div><div style="background-color: rgb(30, 30, 30); font-size: 14px; white-space: pre;"><span style="font-size: 14px; line-height: 19px; color: rgb(214, 214, 214); font-family: Constantia;">},</span></div><div><br/></div></div><ol start="3"><li><div>如何设置state的值</div></li></ol><div><br/></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">const</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">userInfo</span><span style="color: #d4d4d4;"> </span><span style="color: #d4d4d4;">=</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">astore</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">getUserInfo</span><span style="color: #d4d4d4;">() // 准备用户数据</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">    </span><span style="color: #569cd6;">this</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">$store</span><span style="color: #d4d4d4;">.</span><span style="color: #dcdcaa;">dispatch</span><span style="color: #d4d4d4;">(</span><span style="color: #ce9178;">'setUser'</span><span style="color: #d4d4d4;">, </span><span style="color: #9cdcfe;">userInfo</span><span style="color: #d4d4d4;">) // 调用action给state赋值（action触发mutation）</span></div><ol start="4"><li><div>在自己需要使用全局变量的地方使用的自定义state的属性</div></li></ol><div><span style="color: #d4d4d4;background-color:rgb(30, 30, 30);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;">  </span><span style="color: #c586c0;background-color:rgb(30, 30, 30);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;">import</span><span style="color: #d4d4d4;background-color:rgb(30, 30, 30);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"> { </span><span style="color: #9cdcfe;background-color:rgb(30, 30, 30);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;">mapState</span> <span style="color: #d4d4d4;background-color:rgb(30, 30, 30);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;">} </span><span style="color: #c586c0;background-color:rgb(30, 30, 30);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;">from</span><span style="color: #d4d4d4;background-color:rgb(30, 30, 30);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"> </span><span style="color: #ce9178;background-color:rgb(30, 30, 30);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;">'vuex'</span></div><div><span style="font-size: 11pt; font-family: Consolas;"><font style="color: rgb(121, 121, 121);">计算属性中添加额外自定义的getter</font></span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">      </span><span style="color: #d4d4d4;">...</span><span style="color: #dcdcaa;">mapState</span><span style="color: #d4d4d4;">({</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">        </span><span style="color: #dcdcaa;">hasUser</span><span style="color: #9cdcfe;">:</span><span style="color: #d4d4d4;"> </span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;"> </span><span style="color: #569cd6;">=&gt;</span><span style="color: #d4d4d4;"> !!</span><span style="color: #9cdcfe;">state</span><span style="color: #d4d4d4;">.</span><span style="color: #9cdcfe;">user</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;">      }),</span></div><div style="background-color:rgb(30, 30, 30);color:rgb(212, 212, 212);font-family:Consolas, &quot;Courier New&quot;, monospace;font-size:14px;line-height:19px;white-space:pre;"><span style="color: #d4d4d4;"><br/></span></div><hr/><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></span>
</div></body></html> 